<!DOCTYPE html>
<html>
<head>
<title>Javascript Interface to the PiDrone</title>

<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/main.css">

<script type="text/javascript" src="js/three.js"></script>
<script type="text/javascript" src="js/eventemitter2.min.js"></script>
<script type="text/javascript" src="js/roslib.js"></script>
<script type="text/javascript" src="js/ros3d.js"></script>
<script type="text/javascript" src="js/Chart.bundle.min.js"></script>
<script type="text/javascript" src="js/mjpegcanvas.js"></script>
<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>

<script type="text/javascript" src="js/main.js"></script>


</head>

<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <div class="navbar-brand" href="#">PiDrone Web Interface</div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto">
                  <li class="nav-item">
                      <p class="nav-link">
                          Connection Status
                      </p>
                      <div class="alert alert-danger text-center" id="statusMessage">
                          Disconnected
                      </div>
                  </li>
                  <li class="nav-item">
                      <p class="nav-link">
                          Battery Voltage
                      </p>
                      <div class="alert alert-danger text-center" id="vbat">
                          ???
                      </div>
                  </li>
              </ul>
            <div class="form-inline my-2 my-lg-0">
              <div class="form-group">
                  <label for="hostname">Hostname</label>
                  <input type="text" class="form-control mr-sm-2" id="hostname" value="192.168.42.1">
              </div>
              <input class="btn btn-primary my-2 my-sm-0" type="submit" value="Connect" name="submit" onclick="init()"/>
            </div>
          </div>
        </nav>
        <div class="row">
            <div class="col-sm text-center">
                <div id="heightchart">
                    <h4>Height Readings</h4>
                    <input class="btn btn-primary my-2 my-sm-0" type="submit" value="Pause" name="pauseBtn" onclick="togglePauseChart(this)"/>
                    <canvas id="heightChart" width="600" height="300"></canvas>
                </div>
                <div class="form-inline">
                    <div class="form-group">
                        <label for="heightMin">Minimum height:</label>
                        <input type="number" step="0.05" class="form-control mx-2" id="heightMin" value="0" onchange="changeHeightChartYScaleMin()"/>
                        <label for="heightMax">Maximum height:</label>
                        <input type="number" step="0.05" class="form-control mx-2" id="heightMax" value="0.6" onchange="changeHeightChartYScaleMax()"/>
                    </div>
                </div>
            </div>
            <div class="col-sm text-center">
                <h4>Camera Image</h4>
                <img id="cameraImage" alt="Camera image" src="nocamera.jpg" width=320/>
            </div>
            <div class="col-sm text-center">
                <h4>First Camera Image</h4>
                <img id="firstImage" alt="First camera image" src="nocamera.jpg" width=320/>
            </div>
        </div>
        <div class="row">
            <div class="col-sm text-center">
                <h4>IMU Visualization</h4>
                <div id="imu"></div>
            </div>
            <div class="col-sm text-center">
                <h4>Topics</h4>
                <div class="form-group">
                    <label for="imutopic">IMU Topic</label>
                    <input type="text" class="form-control" id="imutopic" value="/pidrone/imu_visualization_marker" onchange="markerUpdate()"/>
                </div>
                <div class="form-group">
                    <label for="imagetopic">Camera Topic</label>
                    <input type="text" class="form-control" id="imagetopic" value="/pidrone/picamera/image_raw" onchange="imageStream()"/>
                    <small id="imagetopicHelp" class="form-text text-muted">Make sure you run <code>rosrun web_video_server web_video_server</code> and the image stream.</small>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <table class="table table-bordered">
                    <tbody>
                      <tr>
                        <th scope="col">Action</th>
                        <td>;</td>
                        <td>Space Bar</td>
                        <td>T</td>
                        <td>A</td>
                        <td>D</td>
                        <td>W</td>
                        <td>S</td>
                        <td>J</td>
                        <td>L</td>
                        <td>I</td>
                        <td>K</td>
                        <td>H</td>
                        <td>R</td>
                        <td>P</td>
                      </tr>
                      <tr>
                        <th scope="col">Key</th>
                        <td>Arm</td>
                        <td>Disarm</td>
                        <td>Takeoff</td>
                        <td>Yaw Left</td>
                        <td>Yaw Right</tD>
                        <td>Up</td>
                        <td>Down</td>
                        <td>Left</td>
                        <td>Right</td>
                        <td>Forward</td>
                        <td>Backward</td>
                        <td>Zero Velocity/Hover</td>
                        <td>Reset position hold</td>
                        <td>Toggle Position Hold</td>
                      </tr>
                    </tbody>
                </table>
            </div>
        </div>
</body>
</html>
